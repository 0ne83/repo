 <!DOCTYPE html>
<html lang="en">
<head>
  <title></title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
  <script type="text/javascript" src="js/json-data-loader-engine.js"></script>
  <script type="text/javascript">
  var content = [
    {
      'file-source' : 'repo-info.json',
      'containers'  : {
        'title' : {'type':'text','source':'name'},
        '.reponame' : {'type':'text','source':'name'},
        '#cydia-repo-url' : {'type':'custom','source':'repo-url', render : function(e,src) {
            $(e).attr('href',"cydia://url/https://cydia.saurik.com/api/share#?source="+src);
          } //render
        }//#cydia-repo-url
      }
    },
    {
      'file-source' : 'pkg-list.json',
      'containers'  : {
        '#packages' : {'type':'custom','source':'packages', render : function(e,src) {
          // i'm expecting an array
          $.each(src, function(idx,package) {
            var p = $("<li class='list-group-item'>");
            var a = $("<a class='btn btn-link'>");
            a.attr("href","depictions/?p=" + package);
            $(a).append(package);
            $(p).append(a);
            $(e).append(p);
          });
        }} //#packages
      } //containers
    } //content item
  ];
  $(document).ready(function(){
    $.each(content, function(idx, webpart) {
      console.log(webpart);
      $.getJSON(webpart['file-source'], function(data) {
        json_data_loader_engine(webpart['containers'], data);
      })
      .fail(function() {
        console.log( "Unable to load "+webpart['file-source'] );
      })
      ;
    });

  }) //ready
  </script>
</head>
<body>

<div class="container">
  <h1><img src="CydiaIcon.png"> <span class="reponame"></span></h1>
</div>

<div class="container">
  <div class="well">
    <p><span class="text-primary"><b><span class="reponame"></span></span></b> is a Cydia repository template.</p>
    <a id="cydia-repo-url" class="btn btn-sm btn-default" href="#">Add to Cydia</a>
  </div>
</div>

<div class="container">
  <h3 id="wells" class="page-header">Hosted Packages</h3>
</div>

<div class="container">
  <ul class="list-group" id="packages">
  </ul>
</div>

</body>
</html>
